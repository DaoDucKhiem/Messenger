<div class="list-conversation-container">
    <!-- search conversation -->
    <div class="search">
        <div class="inpt-search">
            <img src="../../../assets/icons/IconAppChat/11.svg" alt="search-icon">
            <input type="text" [placeholder]="placeHolderSearch" [(ngModel)]="searchTerm" (ngModelChange)="search()" />
        </div>
        <div class="btn-add">
            <img src="../../../assets/icons/IconboxChat/23.svg" alt="add conversation" (click)="getConversations()">
        </div>
    </div>
    <!-- search conversation -->

    <div id="carouselExampleFade" class="carousel slide list-sidebar" data-ride="carousel" data-interval="false">
        <div class="carousel-inner">
            <!-- list conversation -->
            <div class="list-content carousel-item active">
                <div class="conversation" *ngFor="let conversation of conversations"
                (click)="onSelect(conversation.id)"
                [ngClass]="{'selected': conversation.id === currentConvId}"
                routerLink='conversation/{{conversation.id}}'>
                    <!-- border when conversation is selected -->
                    <div class="space" [ngClass]="{'border-selected': conversation.id === currentConvId}"></div>
                    <div *ngFor="let parti of conversation.participants"
                        [ngClass]="{'style-conversation': parti.userId != currentUserId}">
                        <div class="conversation-content" *ngIf="parti.userId != currentUserId">
                            <div class="avatar">
                                <div>
                                    <img *ngIf="parti.avatar && (parti.avatar != '')" [src]="parti.avatar" alt="avatar">
                                    <ngx-avatar *ngIf="parti.avatar || (parti.avatar == '')" name="{{parti.name}}"
                                        size="34"></ngx-avatar>
                                </div>
                            </div>

                            <div class="content">
                                <div class="name-and-last-mess">
                                    <p class="name-conversation">
                                        {{parti.name}}
                                    </p>

                                    <!-- [ngClass]="{
                        'online-and-not-seen': conversation.status === 1 && conversation.lastMessageStatus === 0,
                        'not-seen': conversation.lastMessageStatus === 1,
                        'seen': conversation.lastMessageStatus === 1}" -->
                                    <p class="message-last" *ngIf = "conversation.lastMessage.content.content == null">
                                        #bắt đầu cuộc trò chuyện!
                                    </p>
                                    <p class="message-last" *ngIf = "conversation.lastMessage.content.content">
                                        {{conversation.lastMessage.content.content}}
                                    </p>
                                </div>

                                <div class="time-and-new-mess"
                                    [ngClass]="{'status-seen': conversation.unreadCount == 0}">
                                    <div class="time">
                                        <p *ngIf="forMatTime(conversation.lastMessage.createdAt) === 0">
                                            {{conversation.lastMessage.createdAt | date: 'HH:MM'}}</p>
                                        <p *ngIf="forMatTime(conversation.lastMessage.createdAt) === 1">
                                            {{conversation.lastMessage.createdAt | date: 'EEE'}}</p>
                                        <p *ngIf="forMatTime(conversation.lastMessage.createdAt) === 2">
                                            {{conversation.lastMessage.createdAt | date: 'd MMM' }}
                                        </p>
                                    </div>

                                    <div class="new-message" *ngIf="conversation.unreadCount != 0">
                                        <span>
                                            <p class="amount">{{conversation.unreadCount}}</p>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- list conversation -->
            </div>

            <!-- contact list -->
            <div class="list-content carousel-item">
                <div class="conversation" *ngFor="let contact of contacts"
                    (click)="createConversation(contact.id, contact.fullName)">
                    <!-- border when conversation is selected -->
                    <div class="space"></div>

                    <!-- avatar user contact-->
                    <div class="avatar">
                        <div>
                            <img *ngIf="contact.imageUrl" [src]="contact.imageUrl" alt="avatar">
                            <ngx-avatar *ngIf="contact.imageUrl == ''" size="34" name="{{contact.fullName}}">
                            </ngx-avatar>
                        </div>
                    </div>
                    <!-- avatar user contact-->

                    <div class="username">
                        <p class="name">
                            {{contact.fullName}}
                        </p>
                    </div>
                </div>
            </div>
            <!-- contact list -->
        </div>
    </div>
    <!-- tab menu -->
    <div class="tab-menu">
        <div class="option">
            <div class="tab-1" href="#carouselExampleFade" data-slide="prev" [ngClass]="{'selectedTab': !findContact}"
                (click)="selectedConversations()">
                <p>Cuộc trò chuyện</p>
            </div>
            <div class="tab-1" href="#carouselExampleFade" data-slide="next" [ngClass]="{'selectedTab': findContact}"
                (click)="selectedContacts()">
                <p>Danh bạ</p>
            </div>
        </div>
    </div>
    <!-- tab menu -->
</div>